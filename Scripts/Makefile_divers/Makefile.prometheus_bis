# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ MAKEFILE â€“ GESTION PROMETHEUS (Linux)    â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SERVICE_NAME=prometheus
CONFIG_PATH=/etc/prometheus/prometheus.yml
CONFIG_CHECK_CMD=promtool check config $(CONFIG_PATH)

.PHONY: start stop reload restart check

start:
	sudo systemctl start $(SERVICE_NAME)
	echo "âœ… Prometheus dÃ©marrÃ©"

stop:
	sudo systemctl stop $(SERVICE_NAME)
	echo "ğŸ›‘ Prometheus arrÃªtÃ©"

restart:
	sudo systemctl restart $(SERVICE_NAME)
	echo "ğŸ”„ Prometheus redÃ©marrÃ©"

reload:
	sudo systemctl reload $(SERVICE_NAME)
	echo "â™»ï¸  Prometheus rechargÃ© (si supportÃ©)"

check:
	$(CONFIG_CHECK_CMD)

# Nettoyage des fichiers temporaires Word
clean_temp:
	@echo "[Nettoyage] Suppression des fichiers Word temporaires..."
	@find . -type f \( -name '~WRL*.tmp' -o -name '~$*.docx' \) -exec rm -f {} \;
	@echo "[OK] Tous les fichiers temporaires Word ont Ã©tÃ© supprimÃ©s."
